ðŸ§ª Comprehensive Klear Karma Backend API Testing
================================================
Testing Environment: local
API Base URL: http://localhost:8787/api/v1
Health URL: http://localhost:8787/health
Test Email: test1753694048@example.com

[0;35m
=== INFRASTRUCTURE TESTS ===[0m
[0;34m[TEST][0m Health Check
[0;32m[PASS][0m Health Check - Status: 200
   âœ“ Field 'status' present
   âœ“ Field 'message' present

[0;34m[TEST][0m API Info
[0;31m[FAIL][0m API Info - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m API v1 Info
[0;31m[FAIL][0m API v1 Info - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;35m
=== AUTHENTICATION TESTS ===[0m
[0;34m[TEST][0m User Registration
[0;32m[PASS][0m User Registration - Status: 201
   âœ“ Field 'tokens' present
   âœ“ Field 'user' present

[0;34m[TEST][0m User Login
[0;32m[PASS][0m User Login - Status: 200
   âœ“ Field 'tokens' present
   âœ“ Field 'user' present

[0;32m[PASS][0m JWT Token obtained: eyJhbGciOiJIUzI1NiIsInR5cCI6Ik...
[0;34m[TEST][0m Login with Invalid Credentials
[0;32m[PASS][0m Login with Invalid Credentials - Status: 401

[0;34m[TEST][0m Register with Invalid Email
[0;32m[PASS][0m Register with Invalid Email - Status: 400

[0;34m[TEST][0m Register with Weak Password
[0;32m[PASS][0m Register with Weak Password - Status: 400

[0;35m
=== USER MANAGEMENT TESTS ===[0m
[0;34m[TEST][0m Get Current User
[0;32m[PASS][0m Get Current User - Status: 200
   âœ— Field 'id' missing
   âœ— Field 'email' missing
   âœ— Field 'fullName' missing

[0;34m[TEST][0m Update User Profile
[0;32m[PASS][0m Update User Profile - Status: 200
   âœ— Field 'id' missing
   âœ— Field 'fullName' missing

[0;34m[TEST][0m Get User Appointments
[0;32m[PASS][0m Get User Appointments - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Get User Messages
[0;32m[PASS][0m Get User Messages - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Get User Reviews
[0;32m[PASS][0m Get User Reviews - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Unauthorized User Profile Access
[0;32m[PASS][0m Unauthorized User Profile Access - Status: 401

[0;34m[TEST][0m Unauthorized Profile Update
[0;32m[PASS][0m Unauthorized Profile Update - Status: 401

[0;35m
=== PRACTITIONER TESTS ===[0m
[0;34m[TEST][0m List All Practitioners
[0;32m[PASS][0m List All Practitioners - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m List Practitioners with Pagination
[0;32m[PASS][0m List Practitioners with Pagination - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Search Practitioners by Specialization
[0;32m[PASS][0m Search Practitioners by Specialization - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Search Practitioners by Location
[0;31m[FAIL][0m Search Practitioners by Location - Expected: 200, Got: 400
   Error Response: {"error":"VALIDATION_ERROR","message":"Invalid query parameters: city. Allowed parameters: page, limit, search, sort, order, specialization, location, minRating, maxFee, availability","code":"VALIDATION_ERROR","timestamp":"2025-07-28T09:14:08.611Z","requestId":"e0cb95f3-4e10-4aa6-8d61-8cba8520db41","details":{"stack":"ValidationError: Invalid query parameters: city. Allowed parameters: page, limit, search, sort, order, specialization, location, minRating, maxFee, availability\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3888:11\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:430:24\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46","name":"ValidationError"}}

[0;34m[TEST][0m Filter Available Practitioners
[0;31m[FAIL][0m Filter Available Practitioners - Expected: 200, Got: 400
   Error Response: {"error":"VALIDATION_ERROR","message":"Invalid query parameters: available. Allowed parameters: page, limit, search, sort, order, specialization, location, minRating, maxFee, availability","code":"VALIDATION_ERROR","timestamp":"2025-07-28T09:14:08.627Z","requestId":"91b46535-bec9-443d-bde2-20d378c83131","details":{"stack":"ValidationError: Invalid query parameters: available. Allowed parameters: page, limit, search, sort, order, specialization, location, minRating, maxFee, availability\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3888:11\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:430:24\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46","name":"ValidationError"}}

[0;34m[TEST][0m Complex Practitioner Search
[0;31m[FAIL][0m Complex Practitioner Search - Expected: 200, Got: 400
   Error Response: {"error":"VALIDATION_ERROR","message":"Invalid query parameters: city, available. Allowed parameters: page, limit, search, sort, order, specialization, location, minRating, maxFee, availability","code":"VALIDATION_ERROR","timestamp":"2025-07-28T09:14:08.641Z","requestId":"2bd761af-2118-4ee2-b92d-670ceb2f20e1","details":{"stack":"ValidationError: Invalid query parameters: city, available. Allowed parameters: page, limit, search, sort, order, specialization, location, minRating, maxFee, availability\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3888:11\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:430:24\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46","name":"ValidationError"}}

[0;34m[TEST][0m Get Specific Practitioner
[0;32m[PASS][0m Get Specific Practitioner - Status: 200
   âœ— Field 'id' missing
   âœ— Field 'fullName' missing
   âœ— Field 'specializations' missing

[0;34m[TEST][0m Get Practitioner Services
[0;32m[PASS][0m Get Practitioner Services - Status: 200
   âœ— Field 'services' missing

[0;34m[TEST][0m Get Practitioner Reviews
[0;32m[PASS][0m Get Practitioner Reviews - Status: 200
   âœ— Field 'reviews' missing

[0;34m[TEST][0m Get Practitioner Availability
[0;32m[PASS][0m Get Practitioner Availability - Status: 200
   âœ— Field 'availability' missing

[0;34m[TEST][0m Get Non-existent Practitioner
[0;32m[PASS][0m Get Non-existent Practitioner - Status: 404

[0;34m[TEST][0m Invalid Practitioner Search Parameters
[0;32m[PASS][0m Invalid Practitioner Search Parameters - Status: 400

[0;35m
=== SERVICES TESTS ===[0m
[0;34m[TEST][0m List All Services
[0;32m[PASS][0m List All Services - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m List Services with Pagination
[0;32m[PASS][0m List Services with Pagination - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Search Services by Category
[0;32m[PASS][0m Search Services by Category - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Filter Services by Price Range
[0;32m[PASS][0m Filter Services by Price Range - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Search Services by Name
[0;32m[PASS][0m Search Services by Name - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Complex Service Search
[0;32m[PASS][0m Complex Service Search - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Invalid Service Search Parameters
[0;32m[PASS][0m Invalid Service Search Parameters - Status: 400

[0;35m
=== CATEGORIES TESTS ===[0m
[0;34m[TEST][0m Get Practitioner Categories
[0;32m[PASS][0m Get Practitioner Categories - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Get Service Categories
[0;32m[PASS][0m Get Service Categories - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Get Product Categories
[0;32m[PASS][0m Get Product Categories - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;35m
=== PRODUCT MARKETPLACE TESTS ===[0m
[0;34m[TEST][0m List All Products
[0;32m[PASS][0m List All Products - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m List Products with Pagination
[0;32m[PASS][0m List Products with Pagination - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Search Products by Category
[0;32m[PASS][0m Search Products by Category - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Filter Products by Price Range
[0;31m[FAIL][0m Filter Products by Price Range - Expected: 200, Got: 500
   Error Response: {"success":false,"error":"Failed to fetch products","details":"Invalid query parameters: minPrice, maxPrice"}

[0;34m[TEST][0m Search Products by Name
[0;32m[PASS][0m Search Products by Name - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Filter Verified Products Only
[0;31m[FAIL][0m Filter Verified Products Only - Expected: 200, Got: 500
   Error Response: {"success":false,"error":"Failed to fetch products","details":"Invalid query parameters: verified"}

[0;34m[TEST][0m Filter Products by Modality
[0;32m[PASS][0m Filter Products by Modality - Status: 200
   âœ“ Field 'data' present
   âœ“ Field 'success' present

[0;34m[TEST][0m Complex Product Search
[0;31m[FAIL][0m Complex Product Search - Expected: 200, Got: 500
   Error Response: {"success":false,"error":"Failed to fetch products","details":"Invalid query parameters: minPrice, maxPrice, verified"}

[0;34m[TEST][0m Get Specific Product
[0;32m[PASS][0m Get Specific Product - Status: 200
   âœ— Field 'id' missing
   âœ— Field 'name' missing
   âœ— Field 'description' missing
   âœ— Field 'price' missing

[0;34m[TEST][0m Create Product (User - Should Fail)
[0;31m[FAIL][0m Create Product (User - Should Fail) - Expected: 403, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:10.208Z","requestId":"647ede31-c58c-4a33-a590-0c6a75649bc2","details":{"stack":"AuthenticationError: Authentication required\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3229:13\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;34m[TEST][0m Get Non-existent Product
[0;32m[PASS][0m Get Non-existent Product - Status: 404

[0;34m[TEST][0m Invalid Product Search Parameters
[0;31m[FAIL][0m Invalid Product Search Parameters - Expected: 400, Got: 500
   Error Response: {"success":false,"error":"Failed to fetch products","details":"Invalid query parameters: minPrice"}

[0;35m
=== APPOINTMENT TESTS ===[0m
[0;34m[TEST][0m Get Services for Appointment
[0;32m[PASS][0m Get Services for Appointment - Status: 200

[1;33m[WARN][0m SKIP: Appointment Booking - No service ID available

[0;34m[TEST][0m Book Invalid Appointment
[0;32m[PASS][0m Book Invalid Appointment - Status: 400

[0;34m[TEST][0m Get Non-existent Appointment
[0;32m[PASS][0m Get Non-existent Appointment - Status: 404

[0;35m
=== MESSAGING TESTS ===[0m
[0;34m[TEST][0m Get User Conversations
[0;31m[FAIL][0m Get User Conversations - Expected: 200, Got: 404
   Error Response: {"error":"NOT_FOUND_ERROR","message":"Message not found","code":"NOT_FOUND_ERROR","timestamp":"2025-07-28T09:14:10.435Z","requestId":"e8d99730-519b-4c8b-a23f-fdd53af1e5c8","details":{"stack":"NotFoundError: Message not found\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:4956:11\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3234:5\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3211:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)","name":"NotFoundError"}}

[0;34m[TEST][0m Get Conversation Messages
[0;31m[FAIL][0m Get Conversation Messages - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Send Message
[0;31m[FAIL][0m Send Message - Expected: 201, Got: 400
   Error Response: {"error":"VALIDATION_ERROR","message":"Message validation failed: Valid recipient ID is required","code":"VALIDATION_ERROR","timestamp":"2025-07-28T09:14:10.467Z","requestId":"083afcff-c6f8-4287-808f-78aeb8f5c3f6","details":{"stack":"ValidationError: Message validation failed: Valid recipient ID is required\n    at validateMessage (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:907:15)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:4816:28\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3234:5\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3211:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:5)","name":"ValidationError"}}

[0;35m
=== REVIEW TESTS ===[0m
[0;34m[TEST][0m List All Reviews
[0;31m[FAIL][0m List All Reviews - Expected: 200, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication token required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:10.486Z","requestId":"b616ee44-bb39-4585-b0eb-e66ef49922fa","details":{"stack":"AuthenticationError: Authentication token required\n    at authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3197:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;34m[TEST][0m List Reviews with Filters
[0;31m[FAIL][0m List Reviews with Filters - Expected: 200, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication token required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:10.505Z","requestId":"7ec8b9f8-23a2-4aba-905f-547e1bab5b23","details":{"stack":"AuthenticationError: Authentication token required\n    at authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3197:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;34m[TEST][0m List Reviews by Practitioner
[0;31m[FAIL][0m List Reviews by Practitioner - Expected: 200, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication token required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:10.523Z","requestId":"6629d945-d60a-4d1c-a9e4-7630993a4fca","details":{"stack":"AuthenticationError: Authentication token required\n    at authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3197:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;34m[TEST][0m Create Review
[0;31m[FAIL][0m Create Review - Expected: 201, Got: 400
   Error Response: {"error":"VALIDATION_ERROR","message":"Review validation failed: Valid appointment ID is required","code":"VALIDATION_ERROR","timestamp":"2025-07-28T09:14:10.541Z","requestId":"87e1a7ec-5779-4757-9f9c-5128391fdeb7","details":{"stack":"ValidationError: Review validation failed: Valid appointment ID is required\n    at validateReview (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:813:15)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:5780:29\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3234:5\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3211:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:5)","name":"ValidationError"}}

[0;35m
=== ADMIN TESTS ===[0m
[0;34m[TEST][0m Analytics Dashboard
[0;31m[FAIL][0m Analytics Dashboard - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m User Analytics
[0;31m[FAIL][0m User Analytics - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Practitioner Analytics
[0;31m[FAIL][0m Practitioner Analytics - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Appointment Analytics
[0;31m[FAIL][0m Appointment Analytics - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Revenue Analytics
[0;31m[FAIL][0m Revenue Analytics - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m System Health
[0;31m[FAIL][0m System Health - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m List All Users (Admin)
[0;31m[FAIL][0m List All Users (Admin) - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Search Users (Admin)
[0;31m[FAIL][0m Search Users (Admin) - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Get User Details (Admin)
[0;31m[FAIL][0m Get User Details (Admin) - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Update User Status (Admin)
[0;31m[FAIL][0m Update User Status (Admin) - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m List All Practitioners (Admin)
[0;31m[FAIL][0m List All Practitioners (Admin) - Expected: 200, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:10.688Z","requestId":"20d9b6f5-b4c2-497b-a619-2039185809ce","details":{"stack":"AuthenticationError: Authentication required\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3229:13\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;34m[TEST][0m Verify Practitioner (Admin)
[0;31m[FAIL][0m Verify Practitioner (Admin) - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m List All Products (Admin)
[0;31m[FAIL][0m List All Products (Admin) - Expected: 200, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:10.725Z","requestId":"cbab5fe9-2a1e-45b1-81b3-068e3f4d591b","details":{"stack":"AuthenticationError: Authentication required\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3229:13\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;34m[TEST][0m Verify Product (Admin)
[0;31m[FAIL][0m Verify Product (Admin) - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Get System Settings
[0;31m[FAIL][0m Get System Settings - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Update System Settings
[0;31m[FAIL][0m Update System Settings - Expected: 200, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Admin Access with Invalid Key
[0;31m[FAIL][0m Admin Access with Invalid Key - Expected: 401, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m Admin Access without Key
[0;31m[FAIL][0m Admin Access without Key - Expected: 401, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;35m
=== ERROR HANDLING TESTS ===[0m
[0;34m[TEST][0m 404 - Non-existent Endpoint
[0;32m[PASS][0m 404 - Non-existent Endpoint - Status: 404

[0;34m[TEST][0m 404 - Non-existent API Version
[0;32m[PASS][0m 404 - Non-existent API Version - Status: 404

[0;34m[TEST][0m 404 - Non-existent Resource
[0;31m[FAIL][0m 404 - Non-existent Resource - Expected: 404, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication token required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:10.829Z","requestId":"d84bf40c-8896-4efa-83d6-4430efe0b776","details":{"stack":"AuthenticationError: Authentication token required\n    at authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3197:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;34m[TEST][0m 400 - Invalid JSON
[0;32m[PASS][0m 400 - Invalid JSON - Status: 400

[0;34m[TEST][0m 400 - Missing Required Fields
[0;32m[PASS][0m 400 - Missing Required Fields - Status: 400

[0;34m[TEST][0m 400 - Invalid Email Format
[0;32m[PASS][0m 400 - Invalid Email Format - Status: 400

[0;34m[TEST][0m 401 - No Authorization Header
[0;32m[PASS][0m 401 - No Authorization Header - Status: 401

[0;34m[TEST][0m 401 - Invalid JWT Token
[0;32m[PASS][0m 401 - Invalid JWT Token - Status: 401

[0;34m[TEST][0m 401 - Expired JWT Token
[0;32m[PASS][0m 401 - Expired JWT Token - Status: 401

[0;34m[TEST][0m 403 - User Accessing Admin Endpoint
[0;31m[FAIL][0m 403 - User Accessing Admin Endpoint - Expected: 403, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m 403 - User Creating Product
[0;31m[FAIL][0m 403 - User Creating Product - Expected: 403, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:10.984Z","requestId":"32d892ea-fdbe-4aca-a5db-d8d536622847","details":{"stack":"AuthenticationError: Authentication required\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3229:13\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;34m[TEST][0m 405 - Method Not Allowed
[0;31m[FAIL][0m 405 - Method Not Allowed - Expected: 405, Got: 404
   Error Response: {"error":"Not Found","message":"The requested resource was not found"}

[0;34m[TEST][0m 405 - Invalid Method on Endpoint
[0;31m[FAIL][0m 405 - Invalid Method on Endpoint - Expected: 405, Got: 401
   Error Response: {"error":"AUTHENTICATION_ERROR","message":"Authentication token required","code":"AUTHENTICATION_ERROR","timestamp":"2025-07-28T09:14:11.011Z","requestId":"b06d1118-ad6f-4270-b5fe-05c5e0d22545","details":{"stack":"AuthenticationError: Authentication token required\n    at authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3197:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at secureHeaders2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2831:11)\n    at dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:23)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:46\n    at prettyJSON2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2748:11)","name":"AuthenticationError"}}

[0;35m
=== RATE LIMITING TESTS ===[0m
[0;36m[INFO][0m Note: Rate limiting may be disabled in development
[0;34m[TEST][0m Rate Limit Test 1
[0;32m[PASS][0m Rate Limit Test 1 - Status: 200

[0;34m[TEST][0m Rate Limit Test 2
[0;32m[PASS][0m Rate Limit Test 2 - Status: 200

[0;34m[TEST][0m Rate Limit Test 3
[0;32m[PASS][0m Rate Limit Test 3 - Status: 200

[0;34m[TEST][0m Rate Limit Test 4
[0;32m[PASS][0m Rate Limit Test 4 - Status: 200

[0;34m[TEST][0m Rate Limit Test 5
[0;32m[PASS][0m Rate Limit Test 5 - Status: 200

[0;35m
=== PERFORMANCE TESTS ===[0m
[0;36m[INFO][0m Testing response times (should be < 2 seconds)
[0;34m[TEST][0m Performance - Health Check
[0;32m[PASS][0m Performance - Health Check - Status: 200

[0;36m[INFO][0m Health check response time: 25ms
[0;34m[TEST][0m Performance - List Practitioners
[0;32m[PASS][0m Performance - List Practitioners - Status: 200

[0;36m[INFO][0m Practitioners list response time: 39ms
[0;35m
=== CLEANUP ===[0m
[0;34m[TEST][0m Cleaning up test user...
[0;34m[TEST][0m Delete Test User
[0;31m[FAIL][0m Delete Test User - Expected: 200, Got: 400
   Error Response: {"error":"INVALID_JSON","message":"Invalid JSON in request body","code":"INVALID_JSON","timestamp":"2025-07-28T09:14:11.717Z","requestId":"1e131dc6-8704-46ab-b238-34cbdfac0958","details":{"stack":"SyntaxError: Unexpected end of JSON input\n    at JSON.parse (<anonymous>)\n    at file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1417:57\n    at async file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3764:38\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3234:5\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async authMiddleware (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:3211:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)\n    at async cors2 (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:2668:5)\n    at async dispatch (file:///Users/sheshnarayaniyer/2025/klear-karma-backend/klear-karma-backend/.wrangler/tmp/dev-qFcWSg/index.js:1026:17)","name":"SyntaxError"}}

[0;35m
=== TEST RESULTS SUMMARY ===[0m
Environment: local
API Base URL: http://localhost:8787/api/v1
Total Tests: 99
Passed: 57
Failed: 41
Skipped: 1
Success Rate: 57%

[0;31m[FAIL][0m 41 test(s) failed.
Please review the failed tests and check the API implementation.
Error details available in: /tmp/api_errors_1753694048.log
